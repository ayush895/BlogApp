{% extends 'blogapp/base.html' %}

{% block content %}
<h2 class="mb-3">Edit Blog</h2>
<form method="post" enctype="multipart/form-data" class="card p-4 shadow-sm" style="max-width: 600px; margin: auto;">
    {% csrf_token %}
    <div class="mb-3">
        <label class="form-label">Blog Title</label>
        <input type="text" name="title" class="form-control" placeholder="Enter blog title" value="{{ form.title.value|default:blog.title }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Blog Content</label>
        <textarea name="content" class="form-control" rows="5" placeholder="Write your blog here..." required>{{ form.content.value|default:blog.content }}</textarea>
    </div>
    <div class="mb-3">
        <label class="form-label">Upload Image</label>
        <input type="file" name="image" class="form-control">
    </div>
    <div class="mb-3">
        <small class="text-muted">Current Status:
            <span class="badge {% if blog.status == 'published' %}bg-success{% else %}bg-warning{% endif %}">{{ blog.get_status_display }}</span>
        </small>
    </div>
    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button type="button" class="btn btn-secondary me-md-2" onclick="(function(){ if (document.referrer) { history.back(); } else { window.location.href='{% url 'home' %}'; } })()">Cancel</button>
        <button type="submit" name="action" value="save_draft" class="btn btn-warning me-md-2">
            <i class="bi bi-save"></i> Save as Draft
        </button>
        <button type="submit" name="action" value="publish" class="btn btn-primary">
            <i class="bi bi-send"></i> Publish
        </button>
    </div>
</form>
{% endblock %}